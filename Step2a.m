clear all; close all; clc
%function Step2a_Behaviour(single_participants)

% Define your paths
whichGroup = 'ADHD';%'Control';'ADHD'



% Define your paths
cd('/Users/manab/GoogleDrive_Gmail/Code/GitHub_ADHD_DM/'); % path to your scripts folder
addpath(genpath('/Users/manab/GoogleDrive_Gmail/Code/GitHub_ADHD_DM/'));
addpath(genpath('/Users/manab/Desktop/Functions/eeglab2021.0/'));
eeglab;

% Name of subject folders (Both UQ and Monash)
subject_folderControl = {'C133' 'C134' 'C135' 'C136' 'C137' 'C138' 'C139' 'C141' 'C500' 'C501' 'C502' ...
    'C503' 'C504' 'C505' 'C506' 'C507' 'C508' 'C509' 'C510' 'C511' 'C512' '001_KK' 'C12' 'C21' ...
    '002_LK' 'C50' 'C131' 'C20' 'C132' 'C213' 'C204' 'C171' 'C13' 'C119' 'C121' 'C194' 'C168' ...
    'C14' 'C49' 'C400' 'C100' 'C117' 'C115' 'C110' 'C183' 'C144' 'C252' 'C140' 'C259' 'C143' ...
    'C89' 'C62' 'C88' 'C84' 'C87'};

subject_folderADHD = {'AD88C' 'AD91C' 'AD92C' 'AD93C' 'AD94C' 'AD96C' 'AD33C' 'AD34C' 'AD35C' 'AD36C' 'AD37C' 'AD81C' 'AD82C' 'AD83C' 'AD85C' 'AD84C' 'AD86C' ...
    'AD40C' 'AD11C' 'AD43C' 'AD18C' 'AD24C' 'AD52C' 'AD5C'...
    'AD54C' 'AD75C' 'AD15C' 'AD49C' 'AD69C' 'AD32C' 'AD16C' 'AD72C'...
    'AD59C' 'AD27C' 'AD46C' 'AD22C' 'AD26C' 'AD99C' 'AD48C' 'AD57C'...
    'AD51C' 'AD19C' 'AD98C' 'AD25C' 'AD23C' };

if strcmpi(whichGroup, 'ADHD')
    partGroup = 'ADHD';
%% -------------------------------------------------------------------------------------------------
% ADHD
% ---------------------------------------------------------------------------------------------------
    % datafolder = '/Users/manab/Desktop/ADHDKids/Analysis2023/dataScriptsResults/Data_temp/';
    % matfolder = '/Users/manab/Desktop/ADHDKids/Analysis2023/dataScriptsResults/Data_temp/';
    % pathOut = '/Users/manab/Desktop/ADHDKids/Analysis2023/dataScriptsResults/Data_temp/';

    datafolder = '/Volumes/shared/R-MNHS-SPP/Bellgrove-data/Mana/data/Raw/ADHD/';
    matfolder =  '/Volumes/shared/R-MNHS-SPP/Bellgrove-data/Mana/data/Raw/ADHD/';
    pathOut = '/Users/manab/Desktop/ADHDKids/Analysis2023/dataScriptsResults/Data_temp/';
    
    % Name of subject folders (Both UQ and Monash)
    subject_folder =  subject_folderADHD;
    partGroup = 'ADHD';

    % Prefix of subjects files (Both UQ and Monash)
    sessionID = {'1_88' '1_91' '1_92' '1_93' '1_94' '1_96' '1_33' '1_34' '1_35' '1_36' '1_37' '1_81' '1_82' '1_83' '1_85' '1_84' '1_86' ...
        '1_40' '1_11' '1_43' '1_18' '1_24' '1_52' '1_5'...
        '1_54' '1_75' '1_15' '1_49' '1_69' '1_32' '1_16'...
        '1_72' '1_59' '1_27' '1_46' '1_22' '1_26' '1_99' '1_48' '1_57'...
        '1_51' '1_19' '1_98' '1_25' '1_23'};
    
    % Prefix of only Monash subjects files
    monashSessionID = {'1_88' '1_91' '1_92' '1_93' '1_94' '1_96' '1_33' '1_34' '1_35' '1_36' '1_37' '1_81' '1_82' '1_83' '1_85' '1_84' '1_86'};
    
    % Each subject's blocks
    allBlocks = {[1 3:10] [1:10] [1:10] [1:10] [8:10] [1:5 7:10] [1:10] [1:10] [1:10] [1:10]...
        [1:10] [1:5] [1:10] [1:5] [1:10] [1:10] ...
        [1:10] [1:10] [1:10] [1:7] [1:10] [1:10] [1:10] [1:10] [1:10],...
        [1:11] [1:10] [1:10] [1:10] [1:11] [1:10] [1:10] [1:10] [1:10] [1:10] [1:10] [1:10] [1:9],...
        [1:10] [1:10] [1:10] [1:11] [1:10] [1:10] [1:10]};
    
    
    duds = [];
    
    % The channels that you have excluded for each subject
   allbadchans = {
    [53, 14, 61, 33, 19, 57, 49], [48, 49], [49], [49, 56, 23, 33], [49],... 
    [49, 41, 56, 33, 35, 36], [], [9, 61, 47, 58], ...
    [33, 3, 36, 7, 40, 35, 51, 60, 44, 41, 22, 18, 5, 17], ...
    [29, 6, 18, 30, 31, 24, 58, 3, 1, 5, 17, 19, 25, 57, 9, 14], [2], ...
    [10, 20, 31, 59], [33, 37, 14, 48], [1, 33, 34, 4, 27, 8], ...
    [2, 31, 49, 14, 6], [1, 2, 34, 35, 18, 58, 63, 31, 26, 18, 30], ...
    [42, 17, 49], [7], [2, 7, 35, 42], [], [], ...
    [61], [2, 28], [2, 7], [52], [2, 7, 8, 24, 34, 35], ...
    [31, 15, 34, 53], [2], [], [], [15, 52], ...
    [1, 2, 33, 34, 35, 52], [], [51], [7, 21, 40],... 
    [24, 51, 52], [1, 2, 31, 33, 34, 35], [1, 2, 15, 33, 52], [], ...
    [2, 35, 61], [2, 15, 24, 52], [1, 2, 34, 35], ...
    [1, 6, 7, 35, 57], [1, 2, 33, 34, 5, 16], [2]
};

elseif strcmpi(whichGroup, 'Control')

    %% ---------------------------------------------------------------------------------------------
    % Control
    % ----------------------------------------------------------------------------------------------
    datafolder = '/Users/manab/Desktop/ADHDKids/Analysis2023/dataScriptsResults/Data_temp/';
    matfolder = '/Users/manab/Desktop/ADHDKids/Analysis2023/dataScriptsResults/Data_temp/';
    pathOut = '/Users/manab/Desktop/ADHDKids/Analysis2023/dataScriptsResults/Data_temp/';
    
    subject_folder = subject_folderControl;
    partGroup = 'Ctrl';
    
    % Prefix of subjects files (Both UQ and Monash)
    sessionID = {'133' '134' '135' '136' '137' '138' '139' '141' '500' '501' '502' ...
        '503' '504' '505' '506' '507' '508' '509' '510' '511' '512' '001' '12' '21' ...
        '002' '50' '131' '20' '132' '213' '204' '171' '13' '119' '121' '194' '168' ...
        '14' '49' '400' '100' '117' '115' '110' '183' '144' '252' '140' '259' '143' ...
        '89' '62' '88' '84' '87'};
    
    % Prefix of only Monash subjects files
    monashSessionID = {'133' '134' '135' '136' '137' '138' '139' '141' '500' '501' ...
        '502' '503' '504' '505' '506' '507' '508' '509' '510' '511' '512'};

    allBlocks = {[1:10] [1:10] [1:10] [1:10] [1:10] [1:4] [1:10] [1:10] [1:2] [1:5]...
        [1:4 6:9] [1:4 6:10] [1:3 5:10] [1:3 5:10] [1:5,7:10] [1:10] [1:3 5] [1:10] [1:2 4:5] [1:3,5:10]...
        [1:10] [1:11] [1:10] [1:10] [1:10] [1:10] [1:10] [1:10] [1:10] [1:10]...
        [1:10] [1:10] [1:10] [1:10] [1:10] [1:10] [1:10] [1:10] [1:10] [1:10]...
        [1:4 6:10] [1:10] [1:10] [1:10] [1:10] [1:10] [1:10] [1:10] [1:10] [1:10]...
        [1:10] [1:10] [1:10] [1:10] [1:10]};
    
    duds = [];
    % The channels that you have excluded for each subject
    allbadchans = {
    [61, 29, 19], [26], [], [20, 25], [], [33], [2], [17, 25, 1, 43, 13, 54, 60, 30], [], ...
    [61, 22, 36, 51, 16, 38, 43, 23], [25, 20], [], [], ...
    [13, 14, 26, 36, 43, 49, 54, 15, 27], [1, 20, 25, 62], [2, 10, 6, 40, 62, 37, 4], ...
    [2, 33, 39, 30, 3, 5, 46], [18, 62, 27, 46, 63, 64, 31, 29], [], ...
    [1, 10, 64, 25, 28, 46], [61, 62, 55], [], [52, 2], [], ...
    [2, 3, 5, 35, 36], [15, 52], [], [2, 3, 4, 6, 7, 8, 12, 15], ...
    [5, 11, 48], [52], [8, 15, 16, 52], [], [], ...
    [1, 33], [1, 34, 35], [15], [15, 60, 62], [2, 35, 64], [], ...
    [15, 42, 44, 62], [2, 35, 52], [28], [15, 24, 52], ...
    [28, 33], [1, 29, 33], [15, 52], [], [], ...
    [2, 34], [43], [2, 34, 15], [34], [34, 52], ...
    [15, 27, 45, 52, 64, 57], [35, 62, 43]
};

end
%---------------------------------------------------------------------------------------------------
%% Add all Monash IDs here (Control and ADHD Plus  'AD40C' 'AD11C' 'AD43C' 'AD18C' 'AD24C')
original_paradigm = {'AD88C' 'AD91C' 'AD92C' 'AD93C' 'AD94C' 'AD96C' 'AD33C' 'AD34C' 'AD35C' 'AD36C' 'AD37C' 'AD81C' 'AD82C' 'AD83C' 'AD85C' 'AD84C' 'AD86C' ...
    'C133' 'C134' 'C135' 'C136' 'C137' 'C138' 'C139' 'C141' 'C500' 'C501' ...
    'C502' '503' 'C504' 'C505' 'C506' 'C507' 'C508' 'C509' 'C510' 'C511' 'C512'...
    'AD40C' 'AD11C' 'AD43C' 'AD18C' 'AD24C'};

% These guys did the paradigm that measured RT as the point at which both buttons became clicked
% regerdless of whether there may have been a few ms
% difference between when the first and second button made contact -in this case the new paradigm
% takes the mean time between when each botton made contact.

monashIds = {'AD88C' 'AD91C' 'AD92C' 'AD93C' 'AD94C' 'AD96C' 'AD33C' 'AD34C' 'AD35C' 'AD36C' 'AD37C' 'AD81C' 'AD82C' 'AD83C' 'AD85C' 'AD84C' 'AD86C' ...
    'C133' 'C134' 'C135' 'C136' 'C137' 'C138' 'C139' 'C141' 'C500' 'C501' ...
    'C502' '503' 'C504' 'C505' 'C506' 'C507' 'C508' 'C509' 'C510' 'C511' 'C512'};
%---------------------------------------------------------------------------------------------------
exp_conditions = 'C'; c = 1;

if ~isempty(duds) 
    subject_folder([duds]) = [];
    sessionID([duds]) = [];
    allBlocks([duds]) = [];
    allbadchans([duds]) = [];
end
%% Run
for s = 1%:length(subject_folder)
    disp(subject_folder{s})
    subjID = [datafolder,subject_folder{s}, '/', sessionID{s}, '_', exp_conditions ];
    blocks = allBlocks{s};
    badchans = allbadchans{s};
    Step2b_CPP_ET
end
